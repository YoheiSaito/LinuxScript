#!/bin/bash
trash=$HOME/.trashbox

function rdmkdir(){
	if [ -d $1 ]; then
		rdmkdir $1/../
	else
		mkdir $1
	fi
}

function reremove(){
	
	echo -e '\n\e[33mSelect recover directory number\n\e[34m'
	
	select opt in $@
	do
		echo -e '\e[mPlease check dirctory contents table\n'
		echo -e '---------------------------------\e[35m'
		ls $opt -R
		echo -e '\e[m---------------------------------'

		dist=`cat $opt/.recover-dir.log`
		
		echo -e 'This will be copy to\e[32m' $dist
		echo -e '\e[mcomfirm (y/n)'
		read cfm
		if [ $cfm = "n" ]; then
			echo -e " continue? (y/n)"
			read cfm
			if [ cfm == "y" ]; then
				continue
			else
				break
			fi
		fi
		
		/bin/rm $opt/.recover-dir.log

		echo -e ''
		echo -e 'Do you want to \e[32mpop \e[mfile(s) from manegement Dir (y/n)'
		read cfm
		if [ ! -d $dist ]; then
			rdmkdir $dist
		fi
		if [ $cfm = "y" ]; then
			mv -vf $opt/* $dist
			/bin/rm -rfd $opt/
		else
			mv -vf $opt $dist
		fi

		break
	done
}
reremove $trash/*
