#!/bin/bash
rmdirectory(){
	filename=`echo $@ | awk -F "/" '{ print $NF }'`
	tmpf=/tmp/${filename}_`date +"%Y-%m.%d-%H:%M.%S"`d

	echo -e   $tmpf 
	cd $1
	
	mkdir $tmpf
	mv `pwd` $tmpf || rmdir $tmpf
	cd ../
	echo `pwd` > $tmpf/.recover-dir.log
	echo `date +%s` > $filename/.removedate.log
	if [ ! -e $HOME/.trashbox ]; then
		mkdir $HOME/.trashbox
	fi
	mv $tmpf $HOME/.trashbox/ 
}

rmfile(){
	filename=`echo $@ | awk -F "/" '{ print $NF }'`
	fname=/tmp/${filename}_`date +"%Y-%m.%d-%H:%M.%S"`
	echo $fname
	mkdir $fname
	mv $@ $fname || rmdir $fname
	echo `pwd` > $fname/.recover-dir.log
	echo `date +%s` > $fname/.removedate.log
	if [ ! -e $HOME/.trashbox ]; then
		mkdir $HOME/.trashbox
	fi
	mv $fname $HOME/.trashbox/ 
}

main (){
while [ "$1" != "" ]
	do
		if [ -d $1 ] ; then
			rmdirectory $1
		else 
			rmfile $1
		fi
		shift
	done
}

main $@
